{"N":"package","version":"30","packageVersion":"1","saxonVersion":"SaxonJS 3.0","target":"JS","targetVersion":"3","name":"TOP-LEVEL","relocatable":"false","buildDateTime":"2025-05-27T19:53:04.481Z","ns":"xml=~ xsl=~ xs=~","C":[{"N":"co","binds":"","id":"0","C":[{"N":"mode","onNo":"TC","flags":"","patternSlots":"0","prec":"","C":[{"N":"templateRule","rank":"0","prec":"0","seq":"0","ns":"xml=~ xsl=~ xs=~","minImp":"0","flags":"s","slots":"200","baseUri":"file:///workspaces/def/docs/validation/validation-report-html.xsl","line":"7","module":"validation-report-html.xsl","expand-text":"false","match":"/","prio":"-0.5","matches":"ND","C":[{"N":"p.nodeTest","role":"match","test":"ND","sType":"1ND","ns":"= xml=~ xsl=~ xs=~ "},{"N":"elem","name":"html","sType":"1NE nQ{}html ","nsuri":"","namespaces":"","role":"action","line":"8","C":[{"N":"sequence","sType":"*NE ","C":[{"N":"elem","name":"head","sType":"1NE nQ{}head ","nsuri":"","namespaces":"","line":"9","C":[{"N":"sequence","sType":"*NE ","C":[{"N":"elem","name":"title","sType":"1NE nQ{}title ","nsuri":"","namespaces":"","line":"10","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"DIGGS Validation Report"}]}]},{"N":"elem","name":"link","sType":"1NE nQ{}link ","nsuri":"","namespaces":"","line":"13","C":[{"N":"sequence","sType":"*NA ","C":[{"N":"att","name":"rel","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"stylesheet"}]},{"N":"att","name":"href","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.css"}]}]}]},{"N":"elem","name":"link","sType":"1NE nQ{}link ","nsuri":"","namespaces":"","line":"15","C":[{"N":"sequence","sType":"*NA ","C":[{"N":"att","name":"rel","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"stylesheet"}]},{"N":"att","name":"href","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/theme/eclipse.min.css"}]}]}]},{"N":"elem","name":"link","sType":"1NE nQ{}link ","nsuri":"","namespaces":"","line":"17","C":[{"N":"sequence","sType":"*NA ","C":[{"N":"att","name":"rel","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"stylesheet"}]},{"N":"att","name":"href","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/dialog/dialog.min.css"}]}]}]},{"N":"elem","name":"link","sType":"1NE nQ{}link ","nsuri":"","namespaces":"","line":"19","C":[{"N":"sequence","sType":"*NA ","C":[{"N":"att","name":"rel","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"stylesheet"}]},{"N":"att","name":"href","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/fold/foldgutter.min.css"}]}]}]},{"N":"elem","name":"style","sType":"1NE nQ{}style ","nsuri":"","namespaces":"","line":"21","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\n/* CSS Variables for consistent colors and spacing */\n:root {\n    /* Severity colors */\n    --color-error-bg: #fdd5d1;\n    --color-error-border: #b02819;\n    --color-warning-bg: #fde5be;\n    --color-warning-border: #9c7008;\n    --color-info-bg: #d1e7f2;\n    --color-info-border: #0b68a7;\n    --color-success-bg: #e9f7ef;\n    --color-success-border: #2ecc71;\n    \n    /* Banner specific variations */\n    --color-error-banner: #f5b7b1;\n    --color-warning-banner: #fae5d3;\n    --color-info-banner: #d4e6f1;\n    --color-success-banner: #d4efdf;\n\n    /* Highlight Colors */\n    --color-highlight-bg: rgba(111, 172, 202, 0.5); /* Blue-gray with 50% transparency for selection */\n    --color-search-match: rgba(255, 140, 0, 0.3); /* Light orange for search matches */\n    \n    /* Common spacing values */\n    --spacing-xs: 0px;\n    --spacing-sm: 2px;\n    --spacing-md: 5px;\n    --spacing-lg: 10px;\n    --spacing-xl: 20px;\n    --spacing-xxl: 30px;\n    \n    /* Table dimensions */\n    --col-1-width: 80px;\n    --col-2-width: 100px;\n    --col-3-width: 150px;\n    --col-4-width: 600px;\n}\n\n/* Base styles */\nbody {\n    font-family: Arial, sans-serif;\n    margin: 0;\n    padding: 0;\n    background-color: #f5f5f5;\n    color: #333;\n    line-height: 1.6;\n}\n\n.container {\n    max-width: 1200px;\n    margin: 0 auto;\n    background-color: white;\n    padding: 0 var(--spacing-xxl) var(--spacing-xl);\n    border-radius: 8px;\n    box-shadow: 0 2px 15px rgba(0, 0, 0, 0.3);\n}\n\n/* Header styles */\nh1 {\n    color: #2c3e50;\n    text-align: center;\n    margin-bottom: var(--spacing-xs);\n    padding-bottom: var(--spacing-xs);\n    width: 100%;\n}\n\n.header-container {\n    position: relative;\n    text-align: center;\n    border-bottom: 2px solid #f0f0f0;\n    padding-bottom: var(--spacing-xs);\n    margin-top: var(--spacing-xs);\n    margin-bottom: var(--spacing-md);\n    height: auto;\n}\n\n.header-logo {\n    position: absolute;\n    left: 0;\n    top: 50%;\n    transform: translateY(-50%);\n    width: 150px;\n}\n\n/* Validation result styles - base classes for colors */\n.error {\n    background-color: var(--color-error-bg);\n    border-left: 4px solid var(--color-error-border);\n}\n\n.warning {\n    background-color: var(--color-warning-bg);\n    border-left: 4px solid var(--color-warning-border);\n}\n\n.info {\n    background-color: var(--color-info-bg);\n    border-left: 4px solid var(--color-info-border);\n}\n\n.success {\n    background-color: var(--color-success-bg);\n    border-left: 4px solid var(--color-success-border);\n}\n\n/* Summary banner - override background colors */\n.summary-banner {\n    padding: var(--spacing-xs);\n    margin: var(--spacing-sm);\n    text-align: center;\n    border-radius: 4px;\n    font-weight: bold;\n    font-size: 18px;\n}\n\n.summary-banner.success { background-color: var(--color-success-banner); }\n.summary-banner.info { background-color: var(--color-info-banner); }\n.summary-banner.warning { background-color: var(--color-warning-banner); }\n.summary-banner.error { background-color: var(--color-error-banner); }\n\n/* Table styles */\n.table-container {\n    max-height: 350px;\n    overflow-y: auto;\n    margin-bottom: var(--spacing-md);\n    overflow-x: auto;\n    -webkit-overflow-scrolling: touch;\n}\n\ntable {\n    width: 100%;\n    border-collapse: collapse;\n    margin-top: var(--spacing-xs);\n    font-size: 13px;\n    table-layout: fixed;\n    line-height: 1.2;\n}\n\n/* Column widths */\ntable th:nth-child(1), table td:nth-child(1) { width: var(--col-1-width); }\ntable th:nth-child(2), table td:nth-child(2) { width: var(--col-2-width); }\ntable th:nth-child(3), table td:nth-child(3) { width: var(--col-3-width); }\ntable th:nth-child(4), table td:nth-child(4) { width: var(--col-4-width); }\ntable th:nth-child(5), table td:nth-child(5) { width: auto; }\n\nth, td {\n    padding: 8px;\n    text-align: left;\n    border-bottom: 1px solid black;\n    vertical-align: middle;\n    word-wrap: break-word;\n    overflow-wrap: break-word;\n    line-height: 1.1;\n}\n\n/* Headers */\nth {\n    background-color: #f2f2f2;\n    position: sticky;\n    top: 0;\n    z-index: 10;\n    white-space: nowrap;\n    padding: 5px 8px\n    ;\n}\n\n/* Severity badges */\n.severity-badge {\n    display: inline-block;\n    padding: 2px 6px;\n    border-radius: 4px;\n    font-weight: bold;\n    color: white;\n    margin: 0 3px;\n    line-height: 1;\n}\n\n.severity-badge.error { background-color: var(--color-error-border); }\n.severity-badge.warning { background-color: var(--color-warning-border); }\n.severity-badge.info { background-color: var(--color-info-border); }\n\n/* XML content styles */\n/* Source XML in table - sans-serif and transparent background */\ntable td pre.source-xml {\n    font-family: sans-serif;\n    font-size: inherit;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n    overflow-wrap: break-word;\n    word-break: break-word;\n    background-color: transparent;\n    padding: 8px;\n    margin: 0;\n    display: inline;\n    line-height: 1.1;\n    text-indent:0\n}\n\n/* Source XML outside table (editor box) - monospace */\n.source-xml {\n    font-family: monospace;\n    font-size: inherit;\n    white-space: pre-wrap;\n    word-break: break-all;\n    background-color: #f5f5f5;\n    padding: 0;\n    border-radius: 4px;\n    margin: 0;\n    max-width: 100%;\n    overflow-x: auto;\n    overflow-wrap: break-word;\n}\n\n/* Controls and filter sections */\n.controls {\n    display: flex;\n    justify-content: space-between;\n    margin-top: var(--spacing-md);\n    padding: var(--spacing-sm);\n    background-color: #f8f9fa;\n    border-radius: 4px;\n    position: relative;\n}\n\n.filter-controls {\n    display: flex;\n    align-items: center;\n    width: 100%;\n    justify-content: center;\n}\n\n.section-title {\n    font-weight: bold;\n    margin-right: var(--spacing-xl);\n    font-size: 16px;\n    text-align: left;\n    position: absolute;\n    left: var(--spacing-sm);\n}\n\n.export-controls {\n    position: absolute;\n    right: var(--spacing-sm);\n}\n\n/* Common button styles */\n.button-common {\n    padding: 5px 10px;\n    background-color: #3498db;\n    color: white;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n}\n\n.button-common:hover {\n    background-color: #2980b9;\n}\n\n.export-button {\n    padding: 5px 10px;\n    background-color: #3498db;\n    color: white;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    margin-left: var(--spacing-lg);\n    white-space: nowrap;\n}\n\n.export-button:hover {\n    background-color: #2980b9;\n}\n\n/* Validation summary section */\n.validation-summary {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: var(--spacing-xs);\n    padding: var(--spacing-sm);\n    background-color: #f8f9fa;\n    border-radius: 4px;\n}\n\n.file-info {\n    flex: 1;\n    text-align: left;\n}\n\n.summary-badges {\n    flex: 1;\n    text-align: center;\n}\n\n.timestamp-info {\n    flex: 1;\n    text-align: right;\n}\n\n/* XML Editor styles */\n.editor-container {\n    margin-top: var(--spacing-xs);\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    overflow: hidden;\n}\n\n.editor-header {\n    background-color: #f2f2f2;\n    padding: 10px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1px solid #ddd;\n}\n\n.editor-title {\n    font-weight: bold;\n    margin: 0;\n}\n\n.editor-actions {\n    display: flex;\n    gap: 10px;\n}\n\n.editor-button {\n    padding: 5px 10px;\n    background-color: #3498db;\n    color: white;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n}\n\n.editor-button:hover {\n    background-color: #2980b9;\n}\n\n.editor-body {\n    padding: 0;\n    max-height: 0;\n    overflow: hidden;\n    transition: max-height 0.5s ease;\n    position: relative;\n}\n\n.editor-body.open {\n    max-height: 500px;\n    overflow: visible;\n    display: block;\n}\n\n/* CodeMirror customizations */\n.CodeMirror {\n    height: 350px;\n    font-family: monospace;\n    font-size: 14px;\n    line-height: 1.5;\n}\n\n.editor-body:not(.open) .CodeMirror {\n    display: none;\n}\n\n/* Editor status bar */\n.editor-statusbar {\n    display: flex;\n    justify-content: space-between;\n    background-color: #f0f0f0;\n    padding: 5px 10px;\n    border-top: 1px solid #ddd;\n    font-size: 12px;\n    color: #666;\n}\n\n/* CodeMirror highlighting */\n/* Current line highlighting */\n.CodeMirror-activeline-background {\nbackground-color: rgba(255, 240, 220, 0.3); /* Light orange with transparency */\n}\n\n/* All search matches - make sure to use !important to override any conflicting styles */\n.CodeMirror-matchingbracket,\n.CodeMirror-matchhighlight, \n.cm-matchhighlight {\nbackground-color: var(--color-search-match) !important; /* Light orange */\ncolor: inherit !important;\n}\n\n/* Regular matching brackets */\n.CodeMirror-matchingbracket {\ncolor: inherit !important;\n}\n\n/* The current search match - these are the critical selectors */\n.CodeMirror-selectedtext,\n.cm-searching,\n.CodeMirror-searching,\nspan.cm-searching,\n.CodeMirror-focused .CodeMirror-selectedtext {\nbackground-color: var(--color-highlight-bg) !important; /* Same as regular selection */\ncolor: black !important;\ntext-decoration: none !important;\nborder-radius: 2px;\n}\n\n/* Regular selection */\n.CodeMirror-selected {\nbackground-color: var(--color-highlight-bg) !important;\n}\n\n/* XPath link styles */\n.xpath-link {\n    color: #3498db;\n    text-decoration: underline;\n    cursor: pointer;\n}\n\n.xpath-link:hover {\n    color: #2980b9;\n}\n\n/* Tooltip styling */\n.tooltip {\n    position: relative;\n    display: inline-block;\n}\n\n.tooltip .tooltiptext {\n    visibility: hidden;\n    width: auto;\n    max-width: 500px;\n    background-color: #555;\n    color: #fff;\n    text-align: left;\n    border-radius: 6px;\n    padding: 5px 10px;\n    position: absolute;\n    z-index: 50;\n    top: -5px;\n    left: 105%;\n    opacity: 0;\n    transition: opacity 0.3s;\n    white-space: normal;\n    word-wrap: break-word;\n    overflow-wrap: break-word;\n    hyphens: auto;\n}\n\n.tooltip:hover .tooltiptext {\n    visibility: visible;\n    opacity: 1;\n}\n\n/* Responsive design */\n@media (max-width: 768px) {\n    .editor-actions {\n        flex-direction: column;\n        gap: 5px;\n    }\n\n    .CodeMirror {\n        font-size: 12px;\n    }\n}\n        "}]}]}]}]},{"N":"elem","name":"body","sType":"1NE nQ{}body ","nsuri":"","namespaces":"","line":"490","C":[{"N":"sequence","sType":"*NE ","C":[{"N":"elem","name":"div","sType":"1NE nQ{}div ","nsuri":"","namespaces":"","line":"491","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"container"}]},{"N":"elem","name":"div","sType":"1NE nQ{}div ","nsuri":"","namespaces":"","line":"493","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"header-container"}]},{"N":"elem","name":"img","sType":"1NE nQ{}img ","nsuri":"","namespaces":"","line":"495","C":[{"N":"sequence","sType":"*NA ","C":[{"N":"att","name":"src","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"https://diggsml.org/def/img/diggs-logo.png"}]},{"N":"att","name":"alt","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"DIGGS Logo"}]},{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"header-logo"}]}]}]},{"N":"elem","name":"h1","sType":"1NE nQ{}h1 ","nsuri":"","namespaces":"","line":"496","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"DIGGS Validation Report"}]}]}]}]},{"N":"let","var":"Q{}errorCount","slot":"0","sType":"*NE ","line":"500","C":[{"N":"fn","name":"count","sType":"1ADI","ns":"= xml=~ xsl=~ xs=~ ","role":"select","line":"500","C":[{"N":"docOrder","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"root"},{"N":"axis","name":"descendant-or-self","nodeTest":"*N"}]},{"N":"filter","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{}message"},{"N":"gc","op":"=","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","C":[{"N":"data","diag":"1|0||gc","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{}severity"}]},{"N":"str","val":"ERROR"}]}]}]}]}]},{"N":"let","var":"Q{}warningCount","slot":"1","sType":"*NE ","line":"501","C":[{"N":"fn","name":"count","sType":"1ADI","ns":"= xml=~ xsl=~ xs=~ ","role":"select","line":"501","C":[{"N":"docOrder","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"root"},{"N":"axis","name":"descendant-or-self","nodeTest":"*N"}]},{"N":"filter","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{}message"},{"N":"gc","op":"=","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","C":[{"N":"data","diag":"1|0||gc","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{}severity"}]},{"N":"str","val":"WARNING"}]}]}]}]}]},{"N":"let","var":"Q{}infoCount","slot":"2","sType":"*NE ","line":"502","C":[{"N":"fn","name":"count","sType":"1ADI","ns":"= xml=~ xsl=~ xs=~ ","role":"select","line":"502","C":[{"N":"docOrder","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"root"},{"N":"axis","name":"descendant-or-self","nodeTest":"*N"}]},{"N":"filter","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{}message"},{"N":"gc","op":"=","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","C":[{"N":"data","diag":"1|0||gc","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{}severity"}]},{"N":"str","val":"INFO"}]}]}]}]}]},{"N":"sequence","sType":"*NE ","C":[{"N":"elem","name":"div","sType":"1NE nQ{}div ","nsuri":"","namespaces":"","line":"504","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"validation-summary"}]},{"N":"elem","name":"div","sType":"1NE nQ{}div ","nsuri":"","namespaces":"","line":"505","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"file-info"}]},{"N":"elem","name":"strong","sType":"1NE nQ{}strong ","nsuri":"","namespaces":"","line":"506","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Document: "}]}]},{"N":"elem","name":"span","sType":"1NE nQ{}span ","nsuri":"","namespaces":"","line":"507","C":[{"N":"valueOf","flags":"l","sType":"1NT ","line":"508","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"docOrder","sType":"*NE nQ{}fileName","role":"select","line":"508","C":[{"N":"docOrder","sType":"*NE nQ{}fileName","ns":"= xml=~ xsl=~ xs=~ ","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"root"},{"N":"axis","name":"child","nodeTest":"*NE nQ{}validationReport"}]},{"N":"axis","name":"child","nodeTest":"*NE nQ{}fileName"}]}]}]}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]}]}]}]},{"N":"elem","name":"div","sType":"1NE nQ{}div ","nsuri":"","namespaces":"","line":"512","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"summary-badges"}]},{"N":"elem","name":"span","sType":"1NE nQ{}span ","nsuri":"","namespaces":"","line":"513","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"severity-badge error"}]},{"N":"valueOf","flags":"l","sType":"1NT ","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"varRef","sType":"*","name":"Q{}errorCount","slot":"0","ns":"= xml=~ xsl=~ xs=~ ","role":"select","line":"25"}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":" Errors"}]}]}]},{"N":"elem","name":"span","sType":"1NE nQ{}span ","nsuri":"","namespaces":"","line":"514","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"severity-badge warning"}]},{"N":"valueOf","flags":"l","sType":"1NT ","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"varRef","sType":"*","name":"Q{}warningCount","slot":"1","ns":"= xml=~ xsl=~ xs=~ ","role":"select","line":"27"}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\n                Warnings"}]}]}]},{"N":"elem","name":"span","sType":"1NE nQ{}span ","nsuri":"","namespaces":"","line":"516","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"severity-badge info"}]},{"N":"valueOf","flags":"l","sType":"1NT ","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"varRef","sType":"*","name":"Q{}infoCount","slot":"2","ns":"= xml=~ xsl=~ xs=~ ","role":"select","line":"29"}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":" Info"}]}]}]}]}]},{"N":"elem","name":"div","sType":"1NE nQ{}div ","nsuri":"","namespaces":"","line":"519","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"timestamp-info"}]},{"N":"elem","name":"strong","sType":"1NE nQ{}strong ","nsuri":"","namespaces":"","line":"520","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Timestamp: "}]}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"521","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"docOrder","sType":"*NE nQ{}timestamp","role":"select","line":"521","C":[{"N":"docOrder","sType":"*NE nQ{}timestamp","ns":"= xml=~ xsl=~ xs=~ ","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"root"},{"N":"axis","name":"child","nodeTest":"*NE nQ{}validationReport"}]},{"N":"axis","name":"child","nodeTest":"*NE nQ{}timestamp"}]}]}]}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]}]}]}]}]},{"N":"let","var":"Q{}summaryClass","slot":"3","sType":"*NE ","line":"526","C":[{"N":"doc","sType":"1ND ","base":"file:///workspaces/def/docs/validation/validation-report-html.xsl","role":"select","C":[{"N":"choose","sType":"?NT ","type":"item()*","line":"527","C":[{"N":"gc","op":">","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","sType":"1AB","ns":"= xml=~ xsl=~ xs=~ ","line":"528","C":[{"N":"data","diag":"1|0||gc","C":[{"N":"varRef","name":"Q{}errorCount","slot":"0"}]},{"N":"int","val":"0"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"error"}]},{"N":"gc","op":">","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","sType":"1AB","ns":"= xml=~ xsl=~ xs=~ ","line":"529","C":[{"N":"data","diag":"1|0||gc","C":[{"N":"varRef","name":"Q{}warningCount","slot":"1"}]},{"N":"int","val":"0"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"warning"}]},{"N":"gc","op":">","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","sType":"1AB","ns":"= xml=~ xsl=~ xs=~ ","line":"530","C":[{"N":"data","diag":"1|0||gc","C":[{"N":"varRef","name":"Q{}infoCount","slot":"2"}]},{"N":"int","val":"0"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"info"}]},{"N":"true"},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"success"}]}]}]},{"N":"let","var":"Q{}summaryMessage","slot":"4","sType":"*NE ","line":"535","C":[{"N":"doc","sType":"1ND ","base":"file:///workspaces/def/docs/validation/validation-report-html.xsl","role":"select","C":[{"N":"choose","sType":"?NT ","type":"item()*","line":"536","C":[{"N":"gc","op":">","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","sType":"1AB","ns":"= xml=~ xsl=~ xs=~ ","line":"537","C":[{"N":"data","diag":"1|0||gc","C":[{"N":"varRef","name":"Q{}errorCount","slot":"0"}]},{"N":"int","val":"0"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Result: Fail. Correct errors and rescan."}]},{"N":"gc","op":">","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","sType":"1AB","ns":"= xml=~ xsl=~ xs=~ ","line":"538","C":[{"N":"data","diag":"1|0||gc","C":[{"N":"varRef","name":"Q{}warningCount","slot":"1"}]},{"N":"int","val":"0"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Result: Possible Incompatibilities. Evaluate\n                warnings and address potential interoperability issues."}]},{"N":"gc","op":">","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","sType":"1AB","ns":"= xml=~ xsl=~ xs=~ ","line":"540","C":[{"N":"data","diag":"1|0||gc","C":[{"N":"varRef","name":"Q{}infoCount","slot":"2"}]},{"N":"int","val":"0"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Result: Success! Please review INFO\n                messages."}]},{"N":"true"},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Result: Success! No issues detected."}]}]}]},{"N":"sequence","sType":"?NE ","C":[{"N":"elem","name":"div","sType":"1NE nQ{}div ","nsuri":"","namespaces":"","line":"546","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"fn","name":"concat","sType":"1AS ","C":[{"N":"str","sType":"1AS ","val":"summary-banner "},{"N":"fn","name":"string-join","sType":"1AS ","C":[{"N":"convert","type":"AS*","from":"AZ","to":"AS","C":[{"N":"data","C":[{"N":"mergeAdj","sType":"*","C":[{"N":"varRef","name":"Q{}summaryClass","slot":"3","sType":"*","ns":"= xml=~ xsl=~ xs=~ ","line":"546"}]}]}]},{"N":"str","sType":"1AS ","val":" "}]},{"N":"str","sType":"1AS ","val":""}]}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"547","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"varRef","sType":"*","name":"Q{}summaryMessage","slot":"4","ns":"= xml=~ xsl=~ xs=~ ","role":"select","line":"547"}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]}]}]},{"N":"elem","name":"div","sType":"1NE nQ{}div ","nsuri":"","namespaces":"","line":"551","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"controls"}]},{"N":"elem","name":"div","sType":"1NE nQ{}div ","nsuri":"","namespaces":"","line":"552","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"filter-controls"}]},{"N":"elem","name":"span","sType":"1NE nQ{}span ","nsuri":"","namespaces":"","line":"553","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"section-title"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Validation Report"}]}]}]},{"N":"elem","name":"label","sType":"1NE nQ{}label ","nsuri":"","namespaces":"","line":"554","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"for","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"severity-filter"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Filter by severity:"}]}]}]},{"N":"elem","name":"select","sType":"1NE nQ{}select ","nsuri":"","namespaces":"","line":"555","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"id","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"severity-filter"}]},{"N":"elem","name":"option","sType":"1NE nQ{}option ","nsuri":"","namespaces":"","line":"556","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"value","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"all"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"All"}]}]}]},{"N":"elem","name":"option","sType":"1NE nQ{}option ","nsuri":"","namespaces":"","line":"557","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"value","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"error"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Errors"}]}]}]},{"N":"elem","name":"option","sType":"1NE nQ{}option ","nsuri":"","namespaces":"","line":"558","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"value","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"warning"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Warnings"}]}]}]},{"N":"elem","name":"option","sType":"1NE nQ{}option ","nsuri":"","namespaces":"","line":"559","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"value","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"info"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Info"}]}]}]}]}]}]}]},{"N":"elem","name":"div","sType":"1NE nQ{}div ","nsuri":"","namespaces":"","line":"563","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"export-controls"}]},{"N":"elem","name":"button","sType":"1NE nQ{}button ","nsuri":"","namespaces":"","line":"564","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"id","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"export-csv"}]},{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"export-button"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Save Report as CSV"}]}]}]}]}]}]}]},{"N":"elem","name":"div","sType":"1NE nQ{}div ","nsuri":"","namespaces":"","line":"568","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"table-container"}]},{"N":"elem","name":"table","sType":"1NE nQ{}table ","nsuri":"","namespaces":"","line":"569","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"id","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"validation-table"}]},{"N":"elem","name":"thead","sType":"1NE nQ{}thead ","nsuri":"","namespaces":"","line":"570","C":[{"N":"elem","name":"tr","sType":"1NE nQ{}tr ","nsuri":"","namespaces":"","line":"571","C":[{"N":"sequence","sType":"*NE ","C":[{"N":"elem","name":"th","sType":"1NE nQ{}th ","nsuri":"","namespaces":"","line":"572","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Severity"}]}]},{"N":"elem","name":"th","sType":"1NE nQ{}th ","nsuri":"","namespaces":"","line":"573","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Location"}]}]},{"N":"elem","name":"th","sType":"1NE nQ{}th ","nsuri":"","namespaces":"","line":"574","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Validation Check"}]}]},{"N":"elem","name":"th","sType":"1NE nQ{}th ","nsuri":"","namespaces":"","line":"575","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Message"}]}]},{"N":"elem","name":"th","sType":"1NE nQ{}th ","nsuri":"","namespaces":"","line":"576","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Element Value"}]}]}]}]}]},{"N":"elem","name":"tbody","sType":"1NE nQ{}tbody ","nsuri":"","namespaces":"","line":"579","C":[{"N":"forEach","sType":"*NE ","line":"580","C":[{"N":"docOrder","sType":"*NE nQ{}message","role":"select","line":"580","C":[{"N":"slash","op":"/","sType":"*NE nQ{}message","ns":"= xml=~ xsl=~ xs=~ ","C":[{"N":"root"},{"N":"axis","name":"descendant","nodeTest":"*NE nQ{}message"}]}]},{"N":"let","var":"Q{}severityClass","slot":"5","sType":"*NE ","line":"581","C":[{"N":"doc","sType":"1ND ","base":"file:///workspaces/def/docs/validation/validation-report-html.xsl","role":"select","C":[{"N":"choose","sType":"?NT ","type":"item()*","line":"582","C":[{"N":"gc","op":"=","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","sType":"1AB","ns":"= xml=~ xsl=~ xs=~ ","line":"583","C":[{"N":"data","diag":"1|0||gc","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{}severity"}]},{"N":"str","val":"ERROR"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"error"}]},{"N":"gc","op":"=","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","sType":"1AB","ns":"= xml=~ xsl=~ xs=~ ","line":"584","C":[{"N":"data","diag":"1|0||gc","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{}severity"}]},{"N":"str","val":"WARNING"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"warning"}]},{"N":"true"},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"info"}]}]}]},{"N":"elem","name":"tr","sType":"1NE nQ{}tr ","nsuri":"","namespaces":"","line":"589","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"fn","name":"string-join","sType":"1AS ","C":[{"N":"convert","type":"AS*","from":"AZ","to":"AS","C":[{"N":"data","C":[{"N":"mergeAdj","sType":"*","C":[{"N":"varRef","name":"Q{}severityClass","slot":"5","sType":"*","ns":"= xml=~ xsl=~ xs=~ ","line":"589"}]}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"elem","name":"td","sType":"1NE nQ{}td ","nsuri":"","namespaces":"","line":"590","C":[{"N":"elem","name":"span","sType":"1NE nQ{}span ","nsuri":"","namespaces":"","line":"591","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"fn","name":"concat","sType":"1AS ","C":[{"N":"str","sType":"1AS ","val":"severity-badge "},{"N":"fn","name":"string-join","sType":"1AS ","C":[{"N":"convert","type":"AS*","from":"AZ","to":"AS","C":[{"N":"data","C":[{"N":"mergeAdj","sType":"*","C":[{"N":"varRef","name":"Q{}severityClass","slot":"5","sType":"*","ns":"= xml=~ xsl=~ xs=~ ","line":"591"}]}]}]},{"N":"str","sType":"1AS ","val":" "}]},{"N":"str","sType":"1AS ","val":""}]}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"592","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"axis","sType":"*NE nQ{}severity","name":"child","nodeTest":"*NE nQ{}severity","ns":"= xml=~ xsl=~ xs=~ ","role":"select","line":"592"}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]}]}]}]},{"N":"elem","name":"td","sType":"1NE nQ{}td ","nsuri":"","namespaces":"","line":"595","C":[{"N":"choose","sType":"? ","line":"596","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{}elementPath","sType":"*NE nQ{}elementPath","ns":"= xml=~ xsl=~ xs=~ ","line":"596"},{"N":"elem","name":"div","sType":"1NE nQ{}div ","nsuri":"","namespaces":"","line":"597","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"tooltip"}]},{"N":"elem","name":"span","sType":"1NE nQ{}span ","nsuri":"","namespaces":"","line":"598","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"xpath-link"}]},{"N":"att","name":"data-xpath","nsuri":"","sType":"1NA ","C":[{"N":"fn","name":"string-join","sType":"1AS ","C":[{"N":"convert","type":"AS*","from":"AZ","to":"AS","C":[{"N":"data","C":[{"N":"mergeAdj","sType":"*NE nQ{}elementPath","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{}elementPath","sType":"*NE nQ{}elementPath","ns":"= xml=~ xsl=~ xs=~ ","line":"598"}]}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":" View Element "}]}]}]},{"N":"elem","name":"span","sType":"1NE nQ{}span ","nsuri":"","namespaces":"","line":"599","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"tooltiptext"}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"600","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"axis","sType":"*NE nQ{}elementPath","name":"child","nodeTest":"*NE nQ{}elementPath","ns":"= xml=~ xsl=~ xs=~ ","role":"select","line":"600"}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]}]}]}]}]},{"N":"true"},{"N":"empty","sType":"0 "}]}]},{"N":"elem","name":"td","sType":"1NE nQ{}td ","nsuri":"","namespaces":"","line":"605","C":[{"N":"valueOf","flags":"l","sType":"1NT ","line":"606","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"docOrder","sType":"*NE nQ{}step","role":"select","line":"606","C":[{"N":"slash","op":"/","sType":"*NE nQ{}step","ns":"= xml=~ xsl=~ xs=~ ","C":[{"N":"axis","name":"parent","nodeTest":"?N"},{"N":"axis","name":"child","nodeTest":"*NE nQ{}step"}]}]}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]}]},{"N":"elem","name":"td","sType":"1NE nQ{}td ","nsuri":"","namespaces":"","line":"608","C":[{"N":"elem","name":"pre","sType":"1NE nQ{}pre ","nsuri":"","namespaces":"","line":"609","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"source-xml"}]},{"N":"valueOf","flags":"l","sType":"1NT ","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"axis","sType":"*NE nQ{}text","name":"child","nodeTest":"*NE nQ{}text","ns":"= xml=~ xsl=~ xs=~ ","role":"select","line":"88"}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]}]}]}]},{"N":"elem","name":"td","sType":"1NE nQ{}td ","nsuri":"","namespaces":"","line":"611","C":[{"N":"elem","name":"pre","sType":"1NE nQ{}pre ","nsuri":"","namespaces":"","line":"612","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"source-xml"}]},{"N":"valueOf","flags":"l","sType":"1NT ","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"fn","name":"normalize-space","sType":"1AS","ns":"= xml=~ xsl=~ xs=~ ","role":"select","line":"91","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||normalize-space","C":[{"N":"check","card":"?","diag":"0|0||normalize-space","C":[{"N":"data","diag":"0|0||normalize-space","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{}source"}]}]}]}]},{"N":"str","sType":"1AS ","val":" "}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"N":"elem","name":"div","sType":"1NE nQ{}div ","nsuri":"","namespaces":"","line":"621","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"editor-container"}]},{"N":"elem","name":"div","sType":"1NE nQ{}div ","nsuri":"","namespaces":"","line":"622","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"editor-header"}]},{"N":"elem","name":"h3","sType":"1NE nQ{}h3 ","nsuri":"","namespaces":"","line":"623","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"editor-title"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"XML Editor"}]}]}]},{"N":"elem","name":"div","sType":"1NE nQ{}div ","nsuri":"","namespaces":"","line":"624","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"editor-actions"}]},{"N":"elem","name":"button","sType":"1NE nQ{}button ","nsuri":"","namespaces":"","line":"625","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"editor-button"}]},{"N":"att","name":"id","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"toggle-editor"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Show/Hide Editor"}]}]}]},{"N":"elem","name":"button","sType":"1NE nQ{}button ","nsuri":"","namespaces":"","line":"626","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"editor-button"}]},{"N":"att","name":"id","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"save-xml"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Save XML"}]}]}]},{"N":"elem","name":"button","sType":"1NE nQ{}button ","nsuri":"","namespaces":"","line":"627","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"editor-button"}]},{"N":"att","name":"id","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"format-xml"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Format XML"}]}]}]},{"N":"elem","name":"button","sType":"1NE nQ{}button ","nsuri":"","namespaces":"","line":"628","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"editor-button"}]},{"N":"att","name":"id","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"find-xml"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Find"}]}]}]}]}]}]}]},{"N":"elem","name":"div","sType":"1NE nQ{}div ","nsuri":"","namespaces":"","line":"632","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"editor-body"}]},{"N":"att","name":"id","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"editor-body"}]},{"N":"elem","name":"textarea","sType":"1NE nQ{}textarea ","nsuri":"","namespaces":"","line":"634","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"id","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"xml-editor"}]},{"N":"att","name":"style","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"display: none;"}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"635","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"docOrder","sType":"*NE nQ{}originalXml","role":"select","line":"635","C":[{"N":"docOrder","sType":"*NE nQ{}originalXml","ns":"= xml=~ xsl=~ xs=~ ","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"root"},{"N":"axis","name":"child","nodeTest":"*NE nQ{}validationReport"}]},{"N":"axis","name":"child","nodeTest":"*NE nQ{}originalXml"}]}]}]}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]}]}]}]}]},{"N":"elem","name":"div","sType":"1NE nQ{}div ","nsuri":"","namespaces":"","line":"640","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"class","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"editor-statusbar"}]},{"N":"att","name":"id","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"editor-statusbar"}]},{"N":"elem","name":"div","sType":"1NE nQ{}div ","nsuri":"","namespaces":"","line":"641","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"id","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"cursor-position"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Line: 1, Column: 1"}]}]}]},{"N":"elem","name":"div","sType":"1NE nQ{}div ","nsuri":"","namespaces":"","line":"642","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"id","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"xml-info"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"XML Mode"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"N":"elem","name":"script","sType":"1NE nQ{}script ","nsuri":"","namespaces":"","line":"648","C":[{"N":"att","name":"src","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.js"}]}]},{"N":"elem","name":"script","sType":"1NE nQ{}script ","nsuri":"","namespaces":"","line":"649","C":[{"N":"att","name":"src","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/xml/xml.min.js"}]}]},{"N":"elem","name":"script","sType":"1NE nQ{}script ","nsuri":"","namespaces":"","line":"650","C":[{"N":"att","name":"src","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/edit/matchbrackets.min.js"}]}]},{"N":"elem","name":"script","sType":"1NE nQ{}script ","nsuri":"","namespaces":"","line":"651","C":[{"N":"att","name":"src","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/fold/xml-fold.min.js"}]}]},{"N":"elem","name":"script","sType":"1NE nQ{}script ","nsuri":"","namespaces":"","line":"652","C":[{"N":"att","name":"src","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/edit/matchtags.min.js"}]}]},{"N":"elem","name":"script","sType":"1NE nQ{}script ","nsuri":"","namespaces":"","line":"653","C":[{"N":"att","name":"src","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/selection/active-line.min.js"}]}]},{"N":"elem","name":"script","sType":"1NE nQ{}script ","nsuri":"","namespaces":"","line":"654","C":[{"N":"att","name":"src","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/search/search.min.js"}]}]},{"N":"elem","name":"script","sType":"1NE nQ{}script ","nsuri":"","namespaces":"","line":"655","C":[{"N":"att","name":"src","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/search/searchcursor.min.js"}]}]},{"N":"elem","name":"script","sType":"1NE nQ{}script ","nsuri":"","namespaces":"","line":"656","C":[{"N":"att","name":"src","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/search/jump-to-line.min.js"}]}]},{"N":"elem","name":"script","sType":"1NE nQ{}script ","nsuri":"","namespaces":"","line":"657","C":[{"N":"att","name":"src","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/search/match-highlighter.min.js"}]}]},{"N":"elem","name":"script","sType":"1NE nQ{}script ","nsuri":"","namespaces":"","line":"658","C":[{"N":"att","name":"src","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/dialog/dialog.min.js"}]}]},{"N":"elem","name":"script","sType":"1NE nQ{}script ","nsuri":"","namespaces":"","line":"659","C":[{"N":"att","name":"src","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/fold/foldcode.min.js"}]}]},{"N":"elem","name":"script","sType":"1NE nQ{}script ","nsuri":"","namespaces":"","line":"660","C":[{"N":"att","name":"src","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/fold/foldgutter.min.js"}]}]},{"N":"elem","name":"script","sType":"1NE nQ{}script ","nsuri":"","namespaces":"","line":"661","C":[{"N":"att","name":"src","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/display/placeholder.min.js"}]}]},{"N":"elem","name":"script","sType":"1NE nQ{}script ","nsuri":"","namespaces":"","line":"664","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\n\ndocument.addEventListener('DOMContentLoaded', function() {\n  console.log('DOM content loaded - initializing application');\n  \n  // Editor management object to centralize initialization and state\n  const EditorManager = {\n    // State properties\n    instance: null,\n    initialized: false,\n    visible: false,\n    persistentMarker: null, // Store reference to persistent highlight marker\n    \n    /**\n     * Gets the CodeMirror instance, initializing it if needed\n     * @param {boolean} [showEditor=false] - Whether to show the editor if it's hidden\n     * @returns {CodeMirror|null} - The CodeMirror instance or null if initialization failed\n     */\n    getEditor: function(showEditor = false) {\n      // If we need to show the editor and it's not visible, show it\n      if (showEditor && !this.visible) {\n        this.toggleVisibility(true);\n      }\n      \n      // If not initialized, initialize\n      if (!this.initialized) {\n        this.initialize();\n      }\n      \n      return this.instance;\n    },\n    \n    /**\n     * Initialize the CodeMirror editor\n     * @returns {CodeMirror|null} - The CodeMirror instance or null if initialization failed\n     */\n    initialize: function() {\n      if (this.initialized && this.instance) {\n        this.refresh();\n        return this.instance;\n      }\n      \n      console.log('Initializing CodeMirror editor');\n      const editor = document.getElementById('xml-editor');\n      if (!editor) {\n        console.error('XML editor element not found');\n        return null;\n      }\n      \n      try {\n        // Create CodeMirror instance\n        this.instance = CodeMirror.fromTextArea(editor, {\n          mode: 'application/xml',\n          lineNumbers: true,\n          matchBrackets: true,\n          autoCloseTags: true,\n          matchTags: {bothTags: true},\n          indentUnit: 4,\n          tabSize: 4,\n          smartIndent: true,\n          lineWrapping: true,\n          theme: 'eclipse',\n          styleActiveLine: true,\n          foldGutter: true,\n          gutters: [\"CodeMirror-linenumbers\", \"CodeMirror-foldgutter\"],\n          extraKeys: {\n            \"Ctrl-Space\": \"autocomplete\",\n            \"Ctrl-Q\": function(cm) { cm.foldCode(cm.getCursor()); },\n            \"Ctrl-F\": \"findPersistent\",\n            \"Tab\": function(cm) {\n              // Insert spaces instead of tab character\n              const spaces = Array(cm.getOption(\"indentUnit\") + 1).join(\" \");\n              cm.replaceSelection(spaces);\n            }\n          }\n        });\n        \n        // Set up cursor position tracking\n        if (this.instance) {\n          this.instance.on('cursorActivity', this.updateCursorPosition);\n          this.initialized = true;\n          \n          // Ensure CodeMirror is refreshed when shown\n          setTimeout(() => this.refresh(), 50);\n          return this.instance;\n        }\n        \n        return null;\n      } catch (error) {\n        console.error('Error initializing CodeMirror:', error);\n        alert('Error initializing the XML editor. Some features may be limited.');\n        return null;\n      }\n    },\n    \n    /**\n     * Toggle editor visibility\n     * @param {boolean} [show] - Force show (true) or hide (false)\n     * @returns {boolean} - Whether the editor is now visible\n     */\n    toggleVisibility: function(show = null) {\n      const editorBody = document.getElementById('editor-body');\n      if (!editorBody) {\n        console.error('Editor body not found');\n        return false;\n      }\n      \n      // If show parameter is provided, set visibility accordingly\n      if (show !== null) {\n        if (show) {\n          editorBody.classList.add('open');\n        } else {\n          editorBody.classList.remove('open');\n        }\n      } else {\n        // Otherwise toggle visibility\n        editorBody.classList.toggle('open');\n      }\n      \n      // Update state\n      this.visible = editorBody.classList.contains('open');\n      \n      // If becoming visible, ensure initialization and refresh\n      if (this.visible) {\n        if (!this.initialized) {\n          this.initialize();\n        } else {\n          this.refresh();\n        }\n      } else {\n        // If hiding, clear any persistent highlights\n        if (this.persistentMarker) {\n          if (Array.isArray(this.persistentMarker)) {\n            this.persistentMarker.forEach(marker => {\n              if (marker) marker.clear();\n            });\n          } else if (this.persistentMarker.clear) {\n            this.persistentMarker.clear();\n          }\n          this.persistentMarker = null;\n        }\n      }\n      \n      console.log('Editor toggled, visible:', this.visible);\n      return this.visible;\n    },\n    \n    /**\n     * Refresh the CodeMirror instance to ensure proper rendering\n     */\n    refresh: function() {\n      if (this.instance) {\n        // Use timeout to ensure DOM updates first\n        setTimeout(() => {\n          this.instance.refresh();\n          console.log('CodeMirror refreshed');\n        }, 10);\n      }\n    },\n    \n    /**\n     * Update cursor position in status bar\n     */\n    updateCursorPosition: function() {\n      const cursorPosition = document.getElementById('cursor-position');\n      if (!cursorPosition) return;\n      \n      const cursor = EditorManager.instance.getCursor();\n      cursorPosition.textContent = `Line: ${cursor.line + 1}, Column: ${cursor.ch + 1}`;\n    },\n    \n    /**\n     * Format the XML content in the editor\n     * @returns {boolean} - Success status\n     */\n    formatXml: function() {\n      const editor = this.getEditor();\n      if (!editor) return false;\n      \n      try {\n        // Get the current XML content\n        let xmlContent = editor.getValue();\n        \n        // Basic XML formatting function\n        function prettyPrint(xml) {\n          let formatted = '';\n          let indent = '';\n          const tab = '  '; // 2 spaces for indentation\n          \n          xml = xml.replace(/(>)(<)(\\/*)/g, '$1\\n$2$3'); // Add line breaks\n          \n          const lines = xml.split('\\n');\n          \n          lines.forEach(line => {\n            // Skip blank lines\n            if (line.trim() === '') return;\n            \n            const match = line.match(/^.*<(\\/*)(.*?)(\\s.*)?>/);\n            \n            if (match) {\n              const closing = match[1];\n              const opening = line.match(/<.*?>/g).length - (line.match(/<\\/.*/g)?.length || 0);\n              \n              if (closing) {\n                // This is a closing tag, reduce indent\n                indent = indent.substring(tab.length);\n              }\n              \n              // Add the line with proper indentation\n              formatted += indent + line.trim() + '\\n';\n              \n              if (!closing && opening === 1) {\n                // This is an opening tag, increase indent\n                indent += tab;\n              }\n            } else {\n              // This is content or a non-standard line, just add it with current indent\n              formatted += indent + line.trim() + '\\n';\n            }\n          });\n          \n          return formatted.trim();\n        }\n        \n        // Format the XML\n        const formattedXml = prettyPrint(xmlContent);\n        \n        // Update CodeMirror with formatted XML\n        editor.setValue(formattedXml);\n        \n        // Put cursor at the beginning\n        editor.setCursor(0, 0);\n        \n        console.log('XML formatted successfully');\n        return true;\n      } catch (error) {\n        console.error('Error formatting XML:', error);\n        alert('There was an error formatting the XML. Please check if your XML is valid.');\n        return false;\n      }\n    },\n    \n    /**\n     * Find text in the editor\n     * @returns {boolean} - Success status\n     */\n    findInEditor: function() {\n      const editor = this.getEditor(true); // Show editor if needed\n      if (!editor) return false;\n      \n      // Use CodeMirror's built-in search functionality\n      editor.execCommand('findPersistent');\n      return true;\n    }\n  };\n  \n  //Function to find and select text based on View Element link in report record\nfunction findElementByXPath(xpath) {\n  console.log('Finding element with XPath:', xpath);\n  \n  // Get the editor, showing it if needed\n  const editor = EditorManager.getEditor(true);\n  if (!editor) {\n    console.error('Could not initialize editor for XPath navigation');\n    return false;\n  }\n  \n  // Clear any existing selection before starting a new search\n  editor.setCursor(editor.getCursor());\n  \n  // Parse the XPath to handle position indicators\n  const xmlContent = editor.getValue();\n  const xpathParts = xpath.split('/').filter(part => part.length > 0);\n  \n  let searchPos = 0;\n  let foundElement = false;\n  \n  for (let i = 0; i < xpathParts.length; i++) {\n    const part = xpathParts[i];\n    const tagName = part.replace(/\\[\\d+\\]$/, '');\n    const positionMatch = part.match(/\\[(\\d+)\\]$/);\n    const position = positionMatch ? parseInt(positionMatch[1]) : 1;\n    \n    // Find the nth occurrence of the tag\n    let count = 0;\n    let tagPos = -1;\n    let match;\n    const tagRegex = new RegExp('<' + tagName + '(?:\\\\s|/|>)', 'g');\n    \n    while ((match = tagRegex.exec(xmlContent.substring(searchPos))) !== null && count < position) {\n      count++;\n      tagPos = searchPos + match.index;\n      \n      if (count === position) {\n        searchPos = tagPos;\n        \n        // If this is the last part of the xpath, we've found our element\n        if (i === xpathParts.length - 1) {\n          foundElement = true;\n        }\n        break;\n      }\n    }\n    \n    // If we couldn't find the required occurrence, break\n    if (count < position) {\n      break;\n    }\n  }\n  \n  if (foundElement) {\n    console.log('Element found, determining boundaries');\n    // Find the closing tag to determine element boundaries\n    const lastPart = xpathParts[xpathParts.length - 1];\n    const elementName = lastPart.replace(/\\[\\d+\\]$/, '');\n    \n    let depth = 1;\n    let endPos = searchPos;\n    \n    // Search for closing tag, considering nesting\n    for (let i = searchPos + 1; i < xmlContent.length && depth > 0; i++) {\n      // Check for opening tag\n      if (xmlContent.substring(i, i + elementName.length + 1).indexOf('<' + elementName) === 0) {\n        // Make sure it's a tag and not part of text\n        const nextChar = xmlContent.charAt(i + elementName.length + 1);\n        if (nextChar === ' ' || nextChar === '/' || nextChar === '>') {\n          depth++;\n        }\n      }\n      // Check for closing tag\n      else if (xmlContent.substring(i, i + elementName.length + 2).indexOf('</' + elementName) === 0) {\n        depth--;\n        if (depth === 0) {\n          // Find the end of the closing tag\n          const closeTagEnd = xmlContent.indexOf('>', i);\n          if (closeTagEnd !== -1) {\n            endPos = closeTagEnd + 1; // Length of '>'\n          }\n          break;\n        }\n      }\n    }\n    \n    console.log('Setting CodeMirror selection');\n    \n    // Convert positions to line and character positions for CodeMirror\n    const startPos = editor.posFromIndex(searchPos);\n    const endPosition = editor.posFromIndex(endPos);\n    \n    // Select the element in CodeMirror - this is all we need!\n    editor.setSelection(startPos, endPosition);\n    \n    // Calculate line positions for better centering\n    const selectionHeight = endPosition.line - startPos.line;\n    const visibleLines = Math.floor(350 / editor.defaultTextHeight()) - 4; // Estimate visible lines in 350px - buffer\n    \n    // Scroll to show the selection\n    if (selectionHeight > visibleLines) {\n      // For large selections, focus on the start of the selection with some padding above\n      const paddingLines = Math.min(Math.floor(visibleLines * 0.3), 5); // 30% of visible area or max 5 lines\n      const targetLine = Math.max(0, startPos.line - paddingLines);\n      \n      // Use scrollTo instead of scrollIntoView for more control\n      const targetPos = editor.heightAtLine(targetLine, \"local\");\n      editor.scrollTo(null, targetPos);\n    } else {\n      // For smaller selections that fit in the window, center it\n      const middleLine = Math.floor((startPos.line + endPosition.line) / 2);\n      \n      // Calculate the ideal position\n      const middleHeight = editor.heightAtLine(middleLine, \"local\");\n      const windowMiddle = editor.getScrollInfo().clientHeight / 2;\n      const targetPos = middleHeight - windowMiddle;\n      \n      // Ensure we don't scroll beyond document boundaries\n      const maxScroll = editor.getScrollInfo().height - editor.getScrollInfo().clientHeight;\n      const scrollPos = Math.max(0, Math.min(targetPos, maxScroll));\n      \n      // Apply the scroll\n      editor.scrollTo(null, scrollPos);\n    }\n    \n    // Set up a one-time listener to clear the selection when the user interacts\n    const clearSelectionOnInteraction = () => {\n      editor.setCursor(editor.getCursor()); // This clears the selection\n      editor.off('cursorActivity', clearSelectionOnInteraction);\n    };\n    \n    editor.on('cursorActivity', clearSelectionOnInteraction);\n    \n    console.log('Element found and selected in editor');\n    return true;\n  } else {\n    console.log('Element not found in XML content');\n    alert('Could not find the specified element. The XML structure may have changed.');\n    return false;\n  }\n}\n\n  /**\n   * Directly save XML file using File System Access API with fallback to direct download\n   * @returns {Promise<boolean>} True if save was successful\n   */\n  async function saveXmlDirectly() {\n    try {\n      // Get the editor from the manager\n      const editor = EditorManager.getEditor();\n      if (!editor) {\n        alert('Please open the editor first.');\n        return false;\n      }\n      \n      // Get original filename and prepare default save name\n      const fileInfoSpan = document.querySelector('.file-info span');\n      if (!fileInfoSpan) {\n        console.error('File info span not found');\n        alert('Error: Could not determine filename');\n        return false;\n      }\n      \n      // Prepare filename\n      const originalFileName = fileInfoSpan.textContent.trim();\n      let suggestedName = 'edited_' + originalFileName;\n      \n      // Ensure proper file extension\n      if (!suggestedName.endsWith('.xml') && !suggestedName.endsWith('.diggs')) {\n        suggestedName += '.xml';\n      }\n      \n      // Get XML content from CodeMirror\n      const xmlContent = editor.getValue();\n      \n      // Try to use File System Access API if available\n      if ('showSaveFilePicker' in window) {\n        try {\n          console.log('Using File System Access API');\n          \n          const opts = {\n            suggestedName: suggestedName,\n            types: [{\n              description: 'XML Files',\n              accept: {\n                'application/xml': ['.xml', '.diggs']\n              }\n            }]\n          };\n          \n          // Show native file picker dialog\n          const fileHandle = await window.showSaveFilePicker(opts);\n          \n          // Create a writable stream and write content\n          const writable = await fileHandle.createWritable();\n          await writable.write(xmlContent);\n          await writable.close();\n          \n          console.log('XML file saved successfully via File System Access API');\n          return true;\n        } catch (err) {\n          console.error('Error using File System Access API:', err);\n          \n          // If user cancelled, just return\n          if (err.name === 'AbortError') {\n            console.log('User cancelled the file save operation');\n            return false;\n          }\n          \n          // Fall back to direct download\n          console.log('Falling back to direct download');\n          return downloadFile(xmlContent, suggestedName, 'application/xml');\n        }\n      } else {\n        // Fall back to direct download\n        console.log('File System Access API not supported, using direct download');\n        return downloadFile(xmlContent, suggestedName, 'application/xml');\n      }\n    } catch (err) {\n      console.error('Error in save operation:', err);\n      alert('Error saving XML file: ' + err.message);\n      return false;\n    }\n  }\n  \n  /**\n   * Directly save CSV report using File System Access API with fallback to direct download\n   * @returns {Promise<boolean>} True if save was successful\n   */\n  async function saveCsvDirectly() {\n    try {\n      // Get original filename and prepare default save name\n      const fileInfoSpan = document.querySelector('.file-info span');\n      if (!fileInfoSpan) {\n        console.error('File info span not found');\n        alert('Error: Could not determine filename');\n        return false;\n      }\n      \n      // Prepare filename\n      const originalFileName = fileInfoSpan.textContent.trim();\n      let suggestedName = originalFileName.replace(/\\.[^/.]+$/, '') + '_validation_report.csv';\n      \n      // Ensure proper file extension\n      if (!suggestedName.endsWith('.csv')) {\n        suggestedName += '.csv';\n      }\n      \n      // Generate CSV content\n      const csvData = generateCsvContent();\n      if (!csvData || csvData.length === 0) {\n        console.error('Failed to generate CSV content');\n        alert('Error: No validation data available to export');\n        return false;\n      }\n      \n      // Try to use File System Access API if available\n      if ('showSaveFilePicker' in window) {\n        try {\n          console.log('Using File System Access API for CSV');\n          \n          const opts = {\n            suggestedName: suggestedName,\n            types: [{\n              description: 'CSV Files',\n              accept: {\n                'text/csv': ['.csv']\n              }\n            }]\n          };\n          \n          // Show native file picker dialog\n          const fileHandle = await window.showSaveFilePicker(opts);\n          \n          // Create a writable stream and write content\n          const writable = await fileHandle.createWritable();\n          await writable.write(csvData);\n          await writable.close();\n          \n          console.log('CSV file saved successfully via File System Access API');\n          return true;\n        } catch (err) {\n          console.error('Error using File System Access API for CSV:', err);\n          \n          // If user cancelled, just return\n          if (err.name === 'AbortError') {\n            console.log('User cancelled the CSV file save operation');\n            return false;\n          }\n          \n          // Fall back to direct download\n          console.log('Falling back to direct download for CSV');\n          return downloadFile(csvData, suggestedName, 'text/csv;charset=utf-8;');\n        }\n      } else {\n        // Fall back to direct download\n        console.log('File System Access API not supported, using direct download for CSV');\n        return downloadFile(csvData, suggestedName, 'text/csv;charset=utf-8;');\n      }\n    } catch (err) {\n      console.error('Error in CSV save operation:', err);\n      alert('Error saving CSV file: ' + err.message);\n      return false;\n    }\n  }\n  \n  /**\n   * Helper function for direct file download when File System Access API is unavailable\n   * @param {string} content - File content to download\n   * @param {string} filename - Suggested filename\n   * @param {string} mimeType - MIME type of the file\n   * @returns {boolean} True if download was initiated successfully\n   */\n  function downloadFile(content, filename, mimeType) {\n    try {\n      // Create blob and download link\n      const blob = new Blob([content], { type: mimeType });\n      const url = URL.createObjectURL(blob);\n      \n      // Create and trigger download\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = filename;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      \n      // Clean up\n      URL.revokeObjectURL(url);\n      console.log(`File \"${filename}\" downloaded via direct method`);\n      \n      return true;\n    } catch (err) {\n      console.error('Error in download:', err);\n      alert('Could not download the file: ' + err.message);\n      return false;\n    }\n  }\n  \n  /**\n   * Function to generate CSV content from the validation table\n   * @returns {string} CSV content\n   */\n  function generateCsvContent() {\n    const table = document.getElementById('validation-table');\n    if (!table) {\n      console.error('Validation table not found');\n      return '';\n    }\n    \n    const rows = table.querySelectorAll('tr');\n    if (rows.length === 0) {\n      console.error('No rows found in validation table');\n      return '';\n    }\n    \n    let csv = [];\n    \n    // Get headers\n    const headers = [];\n    const headerCells = rows[0].querySelectorAll('th');\n    headerCells.forEach(cell => {\n      headers.push('\"' + cell.textContent.trim() + '\"');\n    });\n    csv.push(headers.join(','));\n    \n    // Get table data\n    for (let i = 1; i < rows.length; i++) {\n      // Skip hidden rows (filtered out)\n      if (rows[i].style.display === 'none') continue;\n      \n      const row = rows[i];\n      const cells = row.querySelectorAll('td');\n      const rowData = [];\n      \n      cells.forEach((cell, index) => {\n        // Special case for severity column - extract text from badge\n        if (index === 0) {\n          const badge = cell.querySelector('.severity-badge');\n          if (badge) {\n            rowData.push('\"' + badge.textContent.trim() + '\"');\n          } else {\n            rowData.push('\"\"');\n          }\n        } \n        // Special case for location column - extract path from tooltip\n        else if (index === 1 && cell.querySelector('.tooltip')) {\n          const tooltip = cell.querySelector('.tooltiptext');\n          rowData.push('\"' + (tooltip ? tooltip.textContent.trim() : '') + '\"');\n        }\n        // Element value column - extract text without HTML\n        else if (index === 4) {\n          const preElement = cell.querySelector('pre');\n          rowData.push('\"' + (preElement ? preElement.textContent.replace(/\"/g, '\"\"') : '') + '\"');\n        }\n        // Regular columns\n        else {\n          rowData.push('\"' + cell.textContent.trim().replace(/\"/g, '\"\"') + '\"');\n        }\n      });\n      \n      csv.push(rowData.join(','));\n    }\n    \n    return csv.join('\\n');\n  }\n  \n  /**\n   * Filter table rows by severity\n   * @param {string} severity - Severity to filter by ('all', 'error', 'warning', 'info')\n   */\n  function filterBySeverity(severity) {\n    const table = document.getElementById('validation-table');\n    if (!table) {\n      console.error('Validation table not found');\n      return;\n    }\n    \n    const tbody = table.getElementsByTagName('tbody')[0];\n    if (!tbody) {\n      console.error('Table body not found');\n      return;\n    }\n    \n    const rows = tbody.getElementsByTagName('tr');\n    \n    for (let i = 0; i < rows.length; i++) {\n      const row = rows[i];\n      if (severity === 'all') {\n        row.style.display = '';\n      } else {\n        const severityCell = row.getElementsByTagName('td')[0];\n        if (!severityCell) continue;\n        \n        const badge = severityCell.querySelector('.severity-badge');\n        if (!badge) continue;\n        \n        const severityText = badge.textContent.trim().toLowerCase();\n        \n        if (severityText === severity) {\n          row.style.display = '';\n        } else {\n          row.style.display = 'none';\n        }\n      }\n    }\n  }\n  \n  // Set up event listeners for all interactive elements\n  function setupEventListeners() {\n    console.log('Setting up event listeners');\n    \n    // Editor toggle button\n    const toggleEditorBtn = document.getElementById('toggle-editor');\n    if (toggleEditorBtn) {\n      toggleEditorBtn.addEventListener('click', () => EditorManager.toggleVisibility());\n    } else {\n      console.error('Toggle editor button not found');\n    }\n    \n    // Save XML button\n    const saveXmlBtn = document.getElementById('save-xml');\n    if (saveXmlBtn) {\n      saveXmlBtn.addEventListener('click', saveXmlDirectly);\n    } else {\n      console.error('Save XML button not found');\n    }\n    \n    // Format XML button\n    const formatXmlBtn = document.getElementById('format-xml');\n    if (formatXmlBtn) {\n      formatXmlBtn.addEventListener('click', () => EditorManager.formatXml());\n    } else {\n      console.error('Format XML button not found');\n    }\n    \n    // Find button\n    const findXmlBtn = document.getElementById('find-xml');\n    if (findXmlBtn) {\n      findXmlBtn.addEventListener('click', () => EditorManager.findInEditor());\n    } else {\n      console.error('Find XML button not found');\n    }\n    \n    // Export CSV button\n    const exportCsvBtn = document.getElementById('export-csv');\n    if (exportCsvBtn) {\n      exportCsvBtn.addEventListener('click', () => saveCsvDirectly());\n    } else {\n      console.error('Export CSV button not found');\n    }\n    \n    // Set up XPath links\n    const xpathLinks = document.querySelectorAll('.xpath-link');\n    console.log('Found XPath links:', xpathLinks.length);\n    \n    xpathLinks.forEach(link => {\n      link.addEventListener('click', e => {\n        e.preventDefault();\n        const xpath = link.getAttribute('data-xpath');\n        if (xpath) {\n          console.log('Navigating to XPath:', xpath);\n          findElementByXPath(xpath);\n        } else {\n          console.error('No XPath data attribute found');\n        }\n      });\n    });\n    \n    // Set up severity filter\n    const severityFilter = document.getElementById('severity-filter');\n    if (severityFilter) {\n      severityFilter.addEventListener('change', function() {\n        filterBySeverity(this.value);\n      });\n    } else {\n      console.error('Severity filter dropdown not found');\n    }\n    \n    console.log('Event listeners set up successfully');\n  }\n  \n  // Initialize everything\n  setupEventListeners();\n  \n  // Initial filter\n  const severityFilter = document.getElementById('severity-filter');\n  if (severityFilter) {\n    filterBySeverity(severityFilter.value);\n  } else {\n    console.error('Severity filter dropdown not found');\n  }\n  \n  console.log('Initialization complete');\n});\n\n        "}]}]}]}]}]}]}]}]}]},{"N":"overridden"},{"N":"output","C":[{"N":"property","name":"Q{http://saxon.sf.net/}stylesheet-version","value":"30"},{"N":"property","name":"method","value":"html"},{"N":"property","name":"indent","value":"yes"},{"N":"property","name":"encoding","value":"UTF-8"}]},{"N":"decimalFormat"}],"Σ":"ce68c4d3","Σ2":"68095571d050f92103f7e0ce4c35b610ba06f60d2ab24b9e56a4e54c3c3d8a40"}